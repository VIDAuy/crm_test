<!-- Modal -->
<div class="modal modal-xl fade" id="modalCRMessage" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header text-white bg-purple">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">
                    <img class="me-3" src="https://www.oas.org/ext/Portals/14/EasyDNNnews/588/Image.png" alt=""
                        width="48" height="38" />
                    <span id="span_usuario"></span>
                </h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <!-- Menú Mensajes -->
                <nav class="navbar navbar fixed-top">
                    <div class="container-fluid">
                        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasDarkNavbar"
                            aria-labelledby="offcanvasDarkNavbarLabel">
                            <div class="offcanvas-header">
                                <div class="offcanvas-title" id="offcanvasDarkNavbarLabel" style="width: 100%">
                                    <div class="p-3 my-3 text-white bg-purple rounded shadow-sm">

                                        <div class="row">
                                            <div class="col-10">
                                                <div class="d-flex align-items-center">
                                                    <img class="me-3"
                                                        src="https://www.oas.org/ext/Portals/14/EasyDNNnews/588/Image.png"
                                                        alt="" width="48" height="38" />
                                                    <div class="lh-1">
                                                        <h1 class="h6 mb-0 text-white lh-1">Chat</h1>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-2">
                                                <div class="d-flex justify-content-end">
                                                    <button type="button" class="btn-close btn-close-dark m-auto"
                                                        data-bs-dismiss="offcanvas" aria-label="Close"></button>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                            <div class="offcanvas-body">
                                <main class="container">
                                    <div class="my-3 p-3 bg-body rounded shadow-sm">
                                        <h6 class="border-bottom pb-2 mb-0">Mensajes</h6>

                                        <div class="mb-5" id="div_mensajes"></div>

                                        <div id="contenedor_responder_crmessage" style="display: none;">
                                            <div class="alert alert-warning" role="alert">
                                                <span>Responder</span>
                                                <small class="d-block text-end mt-3">
                                                    <div class="input-group">
                                                        <input type="hidden"
                                                            id="txt_id_consulta_respuesta_asignada_crmessage">
                                                        <textarea class="form-control"
                                                            aria-label="Escribe una respuesta ..."
                                                            placeholder="Escribe una respuesta ..."
                                                            id="txt_respuesta_consulta_asignada_crmessage"></textarea>
                                                        <button class="btn btn-success input-group-text"
                                                            onclick="responder_consulta()">
                                                            Enviar
                                                        </button>
                                                    </div>
                                                </small>
                                            </div>
                                        </div>

                                    </div>
                                </main>
                            </div>
                        </div>
                    </div>
                </nav>
                <!-- End Menú Mensajes -->

                <main class="container">
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                            <button class="nav-link" id="nav-nueva-consulta-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-nueva-consulta" type="button" role="tab"
                                aria-controls="nav-nueva-consulta" aria-selected="false">Nueva Consulta</button>
                            <button class="nav-link active" id="nav-mis-consultas-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-mis-consultas" type="button" role="tab"
                                aria-controls="nav-mis-consultas" aria-selected="true">Mis Consultas <span
                                    class="bg-secondary text-white rounded-circle p-1"
                                    id="span_cantidad_respuestas_mis_consultas">0+</span></button>
                            <button class="nav-link" id="nav-consultas-asignadas-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-consultas-asignadas" type="button" role="tab"
                                aria-controls="nav-consultas-asignadas" aria-selected="false">Consultas
                                Asignadas <span class="bg-secondary text-white rounded-circle p-1"
                                    id="span_cantidad_consultas_asignadas">0+</span></button>
                        </div>
                    </nav>
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade" id="nav-nueva-consulta" role="tabpanel"
                            aria-labelledby="nav-nueva-consulta-tab" tabindex="0">
                            <div class="my-3 p-3 bg-body rounded shadow-sm">
                                <div class="border-bottom pb-2 mb-5">
                                    <div class="row">
                                        <div class="col-6">
                                            <h6>Nueva Consulta</h6>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-floating mb-3">
                                            <textarea class="form-control" placeholder="Escriba su consulta ..."
                                                id="txt_consulta_nueva_consulta_crmessage"></textarea>
                                            <label for="txt_consulta_nueva_consulta_crmessage">Escriba una consulta
                                                ...</label>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-floating mb-3">
                                            <select class="form-select"
                                                id="txt_area_consultada_nueva_consulta_crmessage"
                                                aria-label="Floating label select example" onchange="mostrar_select_usuarios_crmessage()">
                                            </select>
                                            <label for="txt_area_consultada_nueva_consulta_crmessage">Seleccione área a
                                                consultar:</label>
                                        </div>
                                    </div>
                                    <div class="col-lg-6" id="div_sub_usuario_crmessage">
                                        <div class="form-floating mb-3">
                                            <select class="form-select"
                                                id="txt_usuario_consultar_nueva_consulta_crmessage"
                                                aria-label="Floating label select example">
                                            </select>
                                            <label for="txt_usuario_consultar_nueva_consulta_crmessage">Seleccione
                                                usuario a consultar:</label>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control"
                                                id="txt_cedula_nueva_consulta_crmessage" placeholder="Cédula del socio">
                                            <label for="txt_cedula_nueva_consulta_crmessage">Cédula del socio
                                                (opcional):</label>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 mt-4">
                                        <div class="d-flex justify-content-center">
                                            <button class="btn btn-success w-25 h-50"
                                                onclick="nueva_consulta_crmessage()">Consultar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade show active" id="nav-mis-consultas" role="tabpanel"
                            aria-labelledby="nav-mis-consultas-tab" tabindex="0">
                            <div class="my-3 p-3 bg-body rounded shadow-sm">
                                <div class="border-bottom pb-2 mb-0">
                                    <div class="row">
                                        <div class="col-6">
                                            <h6>Mis Consultas</h6>
                                        </div>
                                    </div>
                                </div>

                                <div class="table-responsive">
                                    <table id="tabla_mis_consultas_crmessage"
                                        class="table table-sm table-bordered table-striped table-hover" width="100%">
                                        <thead>
                                            <tr>
                                                <th class="text-center col-auto">#</th>
                                                <th class="text-center col-auto"></th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="nav-consultas-asignadas" role="tabpanel"
                            aria-labelledby="nav-consultas-asignadas-tab" tabindex="0">
                            <div class="my-3 p-3 bg-body rounded shadow-sm">
                                <div class="border-bottom pb-2 mb-0">
                                    <div class="row">
                                        <div class="col-6">
                                            <h6>Consultas Asignadas</h6>
                                        </div>
                                    </div>
                                </div>

                                <div class="table-responsive">
                                    <table id="tabla_consultas_asignadas_crmessage"
                                        class="table table-sm table-bordered table-striped table-hover" width="100%">
                                        <thead>
                                            <tr>
                                                <th class="text-center col-auto">#</th>
                                                <th class="text-center col-auto"></th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    Cerrar
                </button>
            </div>
        </div>
    </div>
</div>